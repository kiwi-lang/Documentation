<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pitfalls &mdash; Gamekit  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/collapsible-lists\css\tree_view.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/collapsible-lists\js\CollapsibleLists.compressed.js"></script>
        <script src="../../_static/collapsible-lists\js\apply-collapsible-lists.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Gamekit
          </a>
              <div class="version">
                6c15b89
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Welcome</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Welcome/Roadmap.html">RoadMap</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Plugins/GKFogOfWar/index.html">Fog of War</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Plugins/GKAbility/index.html">Ability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Plugins/GKLobby/index.html">Lobby</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Plugins/GKChat/index.html">Chat</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Plugins/GKMinimap/index.html">Minimap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Plugins/GKML/index.html">Machine Learning</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">UnrealEngine</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#game">Game</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#online">Online</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#others">Others</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Tools/uetools.html">uetools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Tools/ranked.html">ranked</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Tools/resources.html">Resources</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Gamekit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Pitfalls</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/UnrealEngine/Developer/Pitfalls.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pitfalls">
<h1>Pitfalls<a class="headerlink" href="#pitfalls" title="Permalink to this headline"></a></h1>
<section id="rts">
<h2>RTS<a class="headerlink" href="#rts" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>You need one controller per pawn (for multiplayer games)</p></li>
</ul>
<p>It might be tempting to try to implement a single controller that can issue commands to multiple pawns.
but, the <code class="docutils literal notranslate"><span class="pre">UCharacterMovementComponent</span></code> expects the PlayerController and its AcknowledgedPawn to match
the pawn being moved (which essentially would force you to possess/unpossess every pawn.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">UCharacterMovementComponent::ReplicateMoveToServer</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">DeltaTime</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">FVector</span><span class="o">&amp;</span><span class="w"> </span><span class="n">NewAcceleration</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">SCOPE_CYCLE_COUNTER</span><span class="p">(</span><span class="n">STAT_CharacterMovementReplicateMoveToServer</span><span class="p">);</span><span class="w"></span>
<span class="w">   </span><span class="n">check</span><span class="p">(</span><span class="n">CharacterOwner</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span><span class="w"></span>

<span class="w">   </span><span class="c1">// Can only start sending moves if our controllers are synced up over the network, otherwise we flood the reliable buffer.</span>
<span class="w">   </span><span class="n">APlayerController</span><span class="o">*</span><span class="w"> </span><span class="n">PC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Cast</span><span class="o">&lt;</span><span class="n">APlayerController</span><span class="o">&gt;</span><span class="p">(</span><span class="n">CharacterOwner</span><span class="o">-&gt;</span><span class="n">GetController</span><span class="p">());</span><span class="w"></span>
<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">PC</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">PC</span><span class="o">-&gt;</span><span class="n">AcknowledgedPawn</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">CharacterOwner</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="w">   </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Spawn a AI Controller for each pawn. The pawn becomes controlled by the authority
Player issue commands to the AI Controllers it owns.
The problem with this approach is you have to give up on client prediction</p></li>
<li><p>Extend the <code class="docutils literal notranslate"><span class="pre">UCharacterMovementComponent</span></code> and modify the Acknowledged Pawn check.
You will need to implement a customized ACharacter that use the extend CharacterMovement component you created</p></li>
</ol>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">AGKRTSController</span><span class="o">*</span><span class="w"> </span><span class="n">PC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Cast</span><span class="o">&lt;</span><span class="n">AGKRTSController</span><span class="o">&gt;</span><span class="p">(</span><span class="n">CharacterOwner</span><span class="o">-&gt;</span><span class="n">GetController</span><span class="p">());</span><span class="w"></span>

<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">PC</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">PC</span><span class="o">-&gt;</span><span class="n">IsPossessing</span><span class="p">(</span><span class="n">CharacterOwner</span><span class="p">))</span><span class="w"></span>
<span class="w">   </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="w">   </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">AGKCharacterBase</span><span class="o">::</span><span class="n">AGKCharacterBase</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">FObjectInitializer</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ObjectInitializer</span><span class="p">)</span><span class="o">:</span><span class="w"></span>
<span class="w"> </span><span class="n">Super</span><span class="p">(</span><span class="n">ObjectInitializer</span><span class="p">.</span><span class="n">SetDefaultSubobjectClass</span><span class="o">&lt;</span><span class="n">UGKRTSCharMovementComponent</span><span class="o">&gt;</span><span class="p">(</span><span class="n">ACharacter</span><span class="o">::</span><span class="n">CharacterMovementComponentName</span><span class="p">))</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>